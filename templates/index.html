<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Control Cam</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdn.tailwindcss.com"></script>
    <meta http-equiv="refresh" content="30">
</head>

<body class="bg-slate-900 min-h-screen">

<div class="max-w-7xl mx-auto px-6 py-10">

    <!-- Header -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-12">

        <div>
            <h1 class="text-3xl font-bold text-white">Control Cam</h1>
            <p class="text-slate-400 text-sm mt-1">
                Monitoramento em tempo real • Atualização automática 30s
            </p>
        </div>

        <!-- Resumo -->
        <div class="flex gap-6 mt-6 md:mt-0">
            {% set online = cameras | selectattr("status", "equalto", "Online") | list | length %}
            {% set total = cameras | length %}
            {% set offline = total - online %}

            <div class="text-center">
                <p class="text-xs text-slate-400">Online</p>
                <p class="text-lg font-semibold text-green-400">{{ online }}</p>
            </div>

            <div class="text-center">
                <p class="text-xs text-slate-400">Offline</p>
                <p class="text-lg font-semibold text-red-400">{{ offline }}</p>
            </div>

            <div class="text-center">
                <p class="text-xs text-slate-400">Total</p>
                <p class="text-lg font-semibold text-white">{{ total }}</p>
            </div>
        </div>

    </div>

    <!-- BOTÕES PADRONIZADOS -->
    <div class="flex flex-wrap gap-4 mb-12">

        <a href="{{ url_for('cadastro') }}"
           class="flex-1 min-w-[180px] text-center bg-slate-700 hover:bg-slate-600 text-white font-medium py-3 rounded-lg transition duration-200">
            Cadastro
        </a>

        <a href="{{ url_for('teste') }}"
           class="flex-1 min-w-[180px] text-center bg-slate-700 hover:bg-slate-600 text-white font-medium py-3 rounded-lg transition duration-200">
            Teste
        </a>

        <a href="{{ url_for('pesquisa') }}"
           class="flex-1 min-w-[180px] text-center bg-slate-700 hover:bg-slate-600 text-white font-medium py-3 rounded-lg transition duration-200">
            Pesquisa
        </a>

        <a href="{{ url_for('alteracoes') }}"
           class="flex-1 min-w-[180px] text-center bg-slate-700 hover:bg-slate-600 text-white font-medium py-3 rounded-lg transition duration-200">
            Alterações
        </a>

    </div>

    <!-- TABELA -->
    <div class="bg-slate-800 rounded-xl border border-slate-700 shadow-lg">

        <div class="px-6 py-4 border-b border-slate-700">
            <h2 class="text-sm font-semibold text-slate-300 uppercase tracking-wide">
                Câmeras Cadastradas
            </h2>
        </div>

        {% if cameras %}
        <div class="overflow-x-auto">
            <table class="w-full text-sm text-slate-300">
                <thead class="bg-slate-700 text-xs uppercase text-slate-400">
                    <tr>
                        <th class="px-6 py-3 text-left">Nome</th>
                        <th class="px-6 py-3 text-left">IP</th>
                        <th class="px-6 py-3 text-left">Caixa</th>
                        <th class="px-6 py-3 text-left">Status</th>
                        <th class="px-6 py-3 text-left">Latência</th>
                    </tr>
                </thead>

                <tbody>
                    {% for cam in cameras %}
                    <tr class="border-b border-slate-700 hover:bg-slate-700/40 transition">

                        <td class="px-6 py-4 font-medium text-white">
                            {{ cam.nome }}
                        </td>

                        <td class="px-6 py-4">
                            {{ cam.ip }}
                        </td>

                        <td class="px-6 py-4">
                            {{ cam.caixa }}
                        </td>

                        <td class="px-6 py-4">
                            {% if cam.status == "Online" %}
                                <span class="flex items-center gap-2 text-green-400">
                                    <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                                    Online
                                </span>
                            {% else %}
                                <span class="flex items-center gap-2 text-red-400">
                                    <span class="w-2 h-2 bg-red-400 rounded-full"></span>
                                    Offline
                                </span>
                            {% endif %}
                        </td>

                        <td class="px-6 py-4">
                            {{ cam.latencia }}
                        </td>

                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        {% else %}
        <div class="p-6 text-slate-400 text-sm">
            Nenhuma câmera cadastrada.
        </div>
        {% endif %}

    </div>

</div>

</body>
</html>